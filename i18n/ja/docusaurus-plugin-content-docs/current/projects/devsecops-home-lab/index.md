---
id: devsecops-home-lab
title: DevSecOps Home Lab
description: Build a DevSecOps Home Lab based on what I have done.
sidebar_position: 1
---

著者: [Damien Burks]

<iframe
  width="100%"
  height="500"
  src="https://www.youtube.com/embed/3612XpqUTfc?si=3612XpqUTfc"
  frameborder="0"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
></iframe>

## 概要

自分でホームラボを構築したいとお考えですか？それなら、ようこそ！これは私がゼロからホームラボをセットアップする方法を初めて紹介するプロジェクトです。これには、データベースの設定やパッケージのインストール、システム管理者が行うような多くの作業が含まれます。

> _[The Linux Handbook]によると、ホームラボとは自宅に設置されたサーバー（または複数サーバー構成）のことで、テストや開発、家庭用および機能的な利用のために複数のアプリケーションや仮想化システムをホストするものです。_

より正式に言えば、私たちは現実世界の環境をシミュレートする包括的なDevSecOpsホームラボを構築します。このラボは、DevSecOpsスキルのテスト、学習、向上のために設計されており、DevSecOpsエコシステムで一般的に使用されるさまざまなツールや技術を実践的に学ぶことができます。

## 自宅にサーバーがない場合

全く問題ありません！その場合、私がお勧めする2つのオプションがあります：

1. この動画をチェックして、非常に低価格でシステムを購入した方法を学んでください：
2. クラウドで構築する経験がある場合は、このアーキテクチャをそのまま複製できますが、マシンへの接続やその逆の場合に若干異なる場合があります。
3. VirtualBoxなどのツールを使用してローカルにVMを作成します。これには少し学習曲線が伴います。

## アーキテクチャ概要と説明

私のホームラボは、Ubuntu 24.04 LTSを実行する2台のサーバーで構成されています。互換性の問題を避けるため、この正確なバージョンを使用することをお勧めします。

![アーキテクチャ図](/img/projects/devsecops-home-lab/architecture.drawio.svg)

アーキテクチャは2台のサーバーに分かれています：

- `dsb-node-01`: このサーバーは、リバースプロキシ、コンテナ化エンジン、監視スタックなど、重要なインフラストラクチャサービスをホストします。
- `dsb-hub`: DevSecOpsツールチェーンを処理する専用サーバーで、ソースコード管理、セキュリティスキャン、継続的インテグレーション、継続的デリバリー（CI/CD）に焦点を当てています。

### コンポーネントの詳細

#### 1. **サーバー: dsb-node-01**

このサーバーは、コンテナ化環境と監視の基盤を提供します：

- **NGINX**: NGINXはウェブサーバーおよびリバースプロキシとして機能し、着信トラフィックを適切なサービスに効率的にルーティングします。
- **Docker**: Dockerはコンテナ化機能を提供し、アプリケーションやサービスを隔離された環境で実行できるようにします。
- **コンテナ化されたウェブアプリケーション**: これは何でも構いません（Python API、Javaアプリなど）、Dockerコンテナ内にある限り。
- **Prometheus**: Prometheusはシステムおよびアプリケーションのメトリクスを収集・監視し、アラートと監視の中心的なコンポーネントとして機能します。
- **Grafana**: Prometheusと統合されたGrafanaは、メトリクスとログを視覚化するダッシュボードを提供し、システムの健全性とパフォーマンスを把握しやすくします。

#### 2. **サーバー: dsb-hub**

このサーバーは、DevSecOpsツールチェーンの重要なコンポーネントをホストし、安全で自動化されたワークフローを可能にします：

- **NGINX**: `dsb-node-01`と同様に、NGINXはこのサーバーでホストされるサービスのトラフィック管理とルーティングを担当します。
- **Gitea**: 軽量でセルフホスト型のGitサービスであるGiteaは、ソースコードリポジトリを管理するためのバージョン管理機能を提供します。
- **SonarQube**: SonarQubeは、コードベースのバグ、コードスメル、脆弱性などの問題を検出するための継続的なコード品質およびセキュリティチェックに使用されます。
- **Jenkins**: CI/CDの中核として、Jenkinsはアプリケーションのビルド、テスト、デプロイのプロセスを自動化し、効率的な開発パイプラインを確保します。
- **Trivy**: TrivyはDockerイメージの脆弱性スキャンを実行し、コンテナ化されたアプリケーションが既知のセキュリティリスクから解放されていることを確認します。
- **Nexus**: Nexusは依存関係、アーティファクト、バイナリの管理に使用されます。Jenkinsと統合されたリポジトリマネージャーとして機能し、プロジェクトアーティファクトとそのバージョンを管理するための制御を維持します。
- **Docker**: このサーバー上のDockerは、アプリケーションとサービスのコンテナ化において引き続き重要な役割を果たし、環境全体でのデプロイメントの一貫性を維持します。

## 学べること

このプロジェクトを完全に完了することで、以下のようなDevSecOps環境のセットアップに関する実践的な経験を得られます：

- コンテナ化: Dockerコンテナ内でのアプリケーションのデプロイと管理。
- 監視とロギング: Prometheusを使用したアプリケーションの健全性とパフォーマンスの監視。
- セキュリティスキャン: TrivyやSonarQubeなどのセキュリティツールを実装して脆弱性を特定し、コード品質を維持。
- Webトラフィック管理: Nginxをリバースプロキシとして設定し、Webトラフィックを効率的にルーティングおよび保護。

<!-- Links -->

[Damien Burks]: https://www.youtube.com/@damienjburks

[The Linux Handbook]: https://linuxhandbook.com/homelab/